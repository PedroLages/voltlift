# VoltLift ML Architecture - Visual Overview

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          VoltLift Frontend                              â”‚
â”‚                   (React + TypeScript + Zustand)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                                       â”‚
             â”‚                                       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Feature Store   â”‚                   â”‚  Model Registry  â”‚
    â”‚   (IndexedDB)    â”‚                   â”‚   (IndexedDB)    â”‚
    â”‚                  â”‚                   â”‚                  â”‚
    â”‚ â€¢ User vectors   â”‚                   â”‚ â€¢ ONNX models    â”‚
    â”‚ â€¢ Exercise stats â”‚                   â”‚ â€¢ TF.js models   â”‚
    â”‚ â€¢ Session cache  â”‚                   â”‚ â€¢ Rule configs   â”‚
    â”‚ â€¢ History agg    â”‚                   â”‚ â€¢ Embeddings     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                                       â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Recommendation   â”‚
                    â”‚    Service       â”‚
                    â”‚                  â”‚
                    â”‚ â€¢ Exercise Rec   â”‚
                    â”‚ â€¢ Program Rec    â”‚
                    â”‚ â€¢ Progressive    â”‚
                    â”‚   Overload       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚              â”‚              â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  Phase 1:      â”‚ â”‚ Phase 2:   â”‚ â”‚ Phase 3:   â”‚
     â”‚  Rule-Based    â”‚ â”‚ Hybrid ML  â”‚ â”‚ Neural Net â”‚
     â”‚                â”‚ â”‚            â”‚ â”‚            â”‚
     â”‚ â€¢ Heuristics   â”‚ â”‚ â€¢ Collab   â”‚ â”‚ â€¢ Deep RL  â”‚
     â”‚ â€¢ Scoring      â”‚ â”‚   Filter   â”‚ â”‚ â€¢ LSTM     â”‚
     â”‚ â€¢ Thresholds   â”‚ â”‚ â€¢ LightGBM â”‚ â”‚ â€¢ Transformâ”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow - Exercise Recommendations

```
User Action: "Add Exercise"
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Extract Context Features                      â”‚
â”‚    â€¢ Current workout: exercises, duration         â”‚
â”‚    â€¢ Muscle groups trained today                  â”‚
â”‚    â€¢ Time of day, fatigue level                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Extract User Features                          â”‚
â”‚    â€¢ Training history (last 30 days)              â”‚
â”‚    â€¢ Muscle group volume/balance                  â”‚
â”‚    â€¢ Recovery state (sleep, RPE)                  â”‚
â”‚    â€¢ Equipment, goals, experience                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Score All Available Exercises                  â”‚
â”‚    For each exercise in library:                  â”‚
â”‚    â€¢ Muscle balance score (0-30 pts)              â”‚
â”‚    â€¢ Recovery score (0-20 pts)                    â”‚
â”‚    â€¢ User preference score (0-20 pts)             â”‚
â”‚    â€¢ Goal alignment score (0-15 pts)              â”‚
â”‚    â€¢ Experience match (0-10 pts)                  â”‚
â”‚    â€¢ Novelty score (0-5 pts)                      â”‚
â”‚    TOTAL: 0-100 points                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Apply ML Enhancement (Phase 2+)                â”‚
â”‚    â€¢ Collaborative filtering adjustment           â”‚
â”‚    â€¢ User embedding similarity boost              â”‚
â”‚    â€¢ Neural network confidence score              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Rank & Return Top K                            â”‚
â”‚    â€¢ Sort by score (descending)                   â”‚
â”‚    â€¢ Return top 5 with reasons                    â”‚
â”‚    â€¢ Cache for <200ms latency                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–¼
        Display Recommendations
```

## Data Flow - Progressive Overload

```
User Starts Set (e.g., Set 2 of Bench Press)
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Extract Progression Features                   â”‚
â”‚    â€¢ Last 6 sessions for this exercise            â”‚
â”‚    â€¢ Weight trend: â†‘ â†“ â†’                         â”‚
â”‚    â€¢ Volume trend: â†‘ â†“ â†’                         â”‚
â”‚    â€¢ RPE trend: â†‘ â†“ â†’                            â”‚
â”‚    â€¢ Recovery: days since last, sleep, fatigue    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Rule-Based Decision Tree                       â”‚
â”‚    IF avg_rpe < 7 AND reps >= 10:                â”‚
â”‚       â†’ Increase weight +5 lbs                    â”‚
â”‚    ELSE IF avg_rpe > 8.5 OR fatigue = high:      â”‚
â”‚       â†’ Deload -10%                               â”‚
â”‚    ELSE IF weight_trend = stable:                 â”‚
â”‚       â†’ Volume progression (+2 reps)              â”‚
â”‚    ELSE:                                           â”‚
â”‚       â†’ Maintain                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ML Model Prediction (Phase 2+)                 â”‚
â”‚    â€¢ Input: 50+ features                          â”‚
â”‚    â€¢ LightGBM model: predict optimal weight       â”‚
â”‚    â€¢ Confidence: high/medium/low                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Blend Predictions                              â”‚
â”‚    weight = (ml_weight Ã— 0.7) + (rule_weight Ã— 0.3)â”‚
â”‚    Round to nearest 2.5 lbs                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Generate Suggestion                            â”‚
â”‚    {                                               â”‚
â”‚      weight: 135,                                  â”‚
â”‚      reps: [8, 10],                               â”‚
â”‚      confidence: 'high',                          â”‚
â”‚      reasoning: 'Last session RPE < 7...'         â”‚
â”‚    }                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. User Feedback Loop                             â”‚
â”‚    â€¢ User accepts â†’ reward = +1                   â”‚
â”‚    â€¢ User modifies â†’ log (actual - suggested)     â”‚
â”‚    â€¢ User completes â†’ record RPE                  â”‚
â”‚    â€¢ Store in suggestionHistory                   â”‚
â”‚    â€¢ Retrain model periodically                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Feature Engineering Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Raw Data (Zustand Store)               â”‚
â”‚                                                 â”‚
â”‚  â€¢ history: WorkoutSession[]                    â”‚
â”‚  â€¢ settings: UserSettings                       â”‚
â”‚  â€¢ dailyLogs: Record<string, DailyLog>         â”‚
â”‚  â€¢ templates: WorkoutSession[]                  â”‚
â”‚  â€¢ programs: Program[]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Feature Extraction (Aggregations)          â”‚
â”‚                                                 â”‚
â”‚  Time Windows:                                  â”‚
â”‚  â€¢ Last 7 days                                  â”‚
â”‚  â€¢ Last 30 days                                 â”‚
â”‚  â€¢ Last 6 sessions (per exercise)              â”‚
â”‚                                                 â”‚
â”‚  Aggregations:                                  â”‚
â”‚  â€¢ Volume: Î£(weight Ã— reps) per muscle group   â”‚
â”‚  â€¢ Frequency: # sessions per muscle group      â”‚
â”‚  â€¢ Intensity: Avg RPE per exercise             â”‚
â”‚  â€¢ Recovery: Days between sessions             â”‚
â”‚  â€¢ Sleep: Avg hours last 7 days               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Computed Features (150+ features)         â”‚
â”‚                                                 â”‚
â”‚  User Level (15 features):                      â”‚
â”‚  â€¢ experienceLevel, goal, bodyweight, gender    â”‚
â”‚  â€¢ totalWorkouts, workoutsLast7Days             â”‚
â”‚  â€¢ avgRestDays, consecutiveWorkoutDays          â”‚
â”‚                                                 â”‚
â”‚  Muscle Balance (14 features):                  â”‚
â”‚  â€¢ volumeChest, volumeBack, ... (7 groups)     â”‚
â”‚  â€¢ sessionsChest, sessionsBack, ... (7 groups) â”‚
â”‚                                                 â”‚
â”‚  Recovery (10 features):                        â”‚
â”‚  â€¢ sleepAvg7d, sleepAvg30d                     â”‚
â”‚  â€¢ rpeAvg7d, rpeAvg30d                         â”‚
â”‚  â€¢ fatigueLevel, daysSinceLastWorkout          â”‚
â”‚                                                 â”‚
â”‚  Exercise Specific (per exercise, 20 features): â”‚
â”‚  â€¢ daysSinceLastPerformed                       â”‚
â”‚  â€¢ avgWeight, maxWeight, volumeLast6Sessions    â”‚
â”‚  â€¢ completionRate, avgRPE                       â”‚
â”‚  â€¢ weightTrend, volumeTrend, rpeTrend           â”‚
â”‚  â€¢ personalBest1RM                              â”‚
â”‚                                                 â”‚
â”‚  Context (10 features):                         â”‚
â”‚  â€¢ timeOfDay, dayOfWeek                        â”‚
â”‚  â€¢ workoutDurationSoFar                        â”‚
â”‚  â€¢ exercisesInSessionCount                     â”‚
â”‚  â€¢ muscleGroupsTrainedToday                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Normalized Feature Vectors                 â”‚
â”‚      (Ready for ML models)                      â”‚
â”‚                                                 â”‚
â”‚  user_features: Float32Array[50]                â”‚
â”‚  exercise_features: Float32Array[30]            â”‚
â”‚  context_features: Float32Array[20]             â”‚
â”‚                                                 â”‚
â”‚  Total: 100-dimensional feature space           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Model Training Pipeline (Cloud/Offline)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User Data Collection (Firebase/Backend)       â”‚
â”‚                                                 â”‚
â”‚   IF user.ironCloud.enabled:                    â”‚
â”‚     â€¢ Upload anonymized workout history         â”‚
â”‚     â€¢ Upload suggestion feedback                â”‚
â”‚     â€¢ Upload completion rates                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Training Data Preparation                     â”‚
â”‚                                                 â”‚
â”‚   For Exercise Recommendations:                 â”‚
â”‚   â€¢ Positive samples: exercises user performed  â”‚
â”‚   â€¢ Negative samples: exercises user skipped    â”‚
â”‚   â€¢ Features: user + exercise + context         â”‚
â”‚                                                 â”‚
â”‚   For Progressive Overload:                     â”‚
â”‚   â€¢ Input: progression features                 â”‚
â”‚   â€¢ Label: weight user successfully completed   â”‚
â”‚            at RPE 7-8                          â”‚
â”‚   â€¢ Filter out failed sets, extreme RPE         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Model Training (Python Backend)               â”‚
â”‚                                                 â”‚
â”‚   Collaborative Filtering:                      â”‚
â”‚   â€¢ Matrix Factorization (ALS)                  â”‚
â”‚   â€¢ User embeddings: 32-dim                     â”‚
â”‚   â€¢ Exercise embeddings: 32-dim                 â”‚
â”‚   â€¢ Train for 50 iterations                     â”‚
â”‚                                                 â”‚
â”‚   Gradient Boosting (LightGBM):                 â”‚
â”‚   â€¢ 100 trees, max_depth=5                      â”‚
â”‚   â€¢ learning_rate=0.05                          â”‚
â”‚   â€¢ early_stopping_rounds=10                    â”‚
â”‚                                                 â”‚
â”‚   Neural Network (TensorFlow):                  â”‚
â”‚   â€¢ Input: 100 features â†’ Dense(128) â†’ ReLU     â”‚
â”‚   â€¢ Hidden: Dense(64) â†’ ReLU â†’ Dropout(0.3)    â”‚
â”‚   â€¢ Output: Dense(1) â†’ Sigmoid (binary class)  â”‚
â”‚   â€¢ Loss: binary_crossentropy                   â”‚
â”‚   â€¢ Optimizer: Adam(lr=0.001)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Model Evaluation                              â”‚
â”‚                                                 â”‚
â”‚   Offline Metrics:                              â”‚
â”‚   â€¢ Precision@5: 0.45                          â”‚
â”‚   â€¢ Recall@10: 0.62                            â”‚
â”‚   â€¢ NDCG@5: 0.58                               â”‚
â”‚                                                 â”‚
â”‚   Validation:                                   â”‚
â”‚   â€¢ 80/20 train/test split                     â”‚
â”‚   â€¢ Cross-validation (5-fold)                  â”‚
â”‚   â€¢ Ensure no data leakage                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Model Export                                  â”‚
â”‚                                                 â”‚
â”‚   ONNX Export:                                  â”‚
â”‚   â€¢ Convert TensorFlow â†’ ONNX                   â”‚
â”‚   â€¢ Optimize for inference (quantization)       â”‚
â”‚   â€¢ Target size: <2MB per model                 â”‚
â”‚                                                 â”‚
â”‚   TensorFlow.js:                                â”‚
â”‚   â€¢ Convert to layers format                    â”‚
â”‚   â€¢ Shard weights (250KB chunks)                â”‚
â”‚                                                 â”‚
â”‚   Metadata:                                     â”‚
â”‚   â€¢ model_version: "v2.3.1"                    â”‚
â”‚   â€¢ trained_on: 50000 samples                   â”‚
â”‚   â€¢ accuracy: 0.78                              â”‚
â”‚   â€¢ checksum: SHA256 hash                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Model Deployment                              â”‚
â”‚                                                 â”‚
â”‚   Storage:                                      â”‚
â”‚   â€¢ Firebase Storage (for download)             â”‚
â”‚   â€¢ CDN (CloudFlare)                            â”‚
â”‚                                                 â”‚
â”‚   Client Update:                                â”‚
â”‚   â€¢ Check for new model on app startup          â”‚
â”‚   â€¢ Download if version > current               â”‚
â”‚   â€¢ Validate checksum                           â”‚
â”‚   â€¢ Store in IndexedDB                          â”‚
â”‚   â€¢ Activate after validation                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Cold Start Strategy

```
New User (No History)
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Onboarding Questionnaire                  â”‚
â”‚     â€¢ What's your goal?                       â”‚
â”‚       [Strength, Hypertrophy, Powerlifting]   â”‚
â”‚     â€¢ Experience level?                       â”‚
â”‚       [Beginner, Intermediate, Advanced]      â”‚
â”‚     â€¢ Available equipment?                    â”‚
â”‚       [Barbell, Dumbbells, Cables, ...]      â”‚
â”‚     â€¢ Days per week?                          â”‚
â”‚       [3, 4, 5, 6, 7]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Content-Based Recommendations             â”‚
â”‚     Filter exercises by:                      â”‚
â”‚     â€¢ Equipment match                         â”‚
â”‚     â€¢ Difficulty â‰¤ experience level          â”‚
â”‚     â€¢ Category match goal:                    â”‚
â”‚       - Strength â†’ Compounds                  â”‚
â”‚       - Hypertrophy â†’ Isolation + Compound   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Show Starter Templates                    â”‚
â”‚     Based on goal + frequency:                â”‚
â”‚     â€¢ 3-day: Full Body (Beginner)            â”‚
â”‚     â€¢ 4-day: Upper/Lower (Intermediate)      â”‚
â”‚     â€¢ 5-day: PPL (Advanced)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. Optional: Baseline Assessment             â”‚
â”‚     "Help us personalize your experience"     â”‚
â”‚     Test 5 key lifts:                         â”‚
â”‚     â€¢ Squat: What weight for 5 reps?         â”‚
â”‚     â€¢ Bench: What weight for 5 reps?         â”‚
â”‚     â€¢ Deadlift: What weight for 5 reps?      â”‚
â”‚     Record: weight, reps, RPE                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. Seed Initial Recommendations              â”‚
â”‚     Use baseline + popular exercises          â”‚
â”‚     After 3 workouts â†’ switch to ML           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Performance Budget

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Latency Requirements                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Exercise Recommendations                        â”‚
â”‚  â€¢ Feature extraction:      <20ms               â”‚
â”‚  â€¢ Scoring (500 exercises): <30ms               â”‚
â”‚  â€¢ ML model inference:      <30ms               â”‚
â”‚  â€¢ Ranking & filtering:     <10ms               â”‚
â”‚  â€¢ Total:                   <100ms âœ“            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Progressive Overload                            â”‚
â”‚  â€¢ Feature extraction:      <15ms               â”‚
â”‚  â€¢ Rule-based logic:        <5ms                â”‚
â”‚  â€¢ ML model inference:      <20ms               â”‚
â”‚  â€¢ Blending:                <5ms                â”‚
â”‚  â€¢ Total:                   <50ms âœ“             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Program Recommendations                         â”‚
â”‚  â€¢ Feature extraction:      <15ms               â”‚
â”‚  â€¢ Scoring (20 programs):   <10ms               â”‚
â”‚  â€¢ Ranking:                 <5ms                â”‚
â”‚  â€¢ Total:                   <30ms âœ“             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Storage Requirements                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Models (IndexedDB)                              â”‚
â”‚  â€¢ Collaborative filter:    500 KB              â”‚
â”‚  â€¢ LightGBM (ONNX):        1.5 MB               â”‚
â”‚  â€¢ Neural net (TF.js):     2.0 MB               â”‚
â”‚  â€¢ Total:                  4.0 MB âœ“             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Feature Cache (localStorage)                    â”‚
â”‚  â€¢ User features:           5 KB                â”‚
â”‚  â€¢ Exercise stats:          50 KB               â”‚
â”‚  â€¢ Session cache:           10 KB               â”‚
â”‚  â€¢ Total:                   65 KB âœ“             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Monitoring & Alerts

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Production Monitoring                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Performance Metrics                             â”‚
â”‚  âœ“ P95 latency < 100ms                          â”‚
â”‚  âœ“ P99 latency < 200ms                          â”‚
â”‚  âš  Alert if > 500ms                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Quality Metrics (Daily)                         â”‚
â”‚  âœ“ Exercise CTR > 30%                           â”‚
â”‚  âœ“ Progression acceptance > 50%                 â”‚
â”‚  âš  Alert if drops >10% from baseline            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Error Tracking                                  â”‚
â”‚  âœ“ Model load failures < 0.1%                   â”‚
â”‚  âœ“ Inference errors < 0.01%                     â”‚
â”‚  ğŸš¨ Alert on any error spike                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  User Experience                                 â”‚
â”‚  âœ“ D7 retention > 40%                           â”‚
â”‚  âœ“ D30 retention > 25%                          â”‚
â”‚  âœ“ Avg session duration > 45 min                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
